<template>
  <div :class="showCartShopClass" @click="showCartShop = false"></div>

  <div>
    <div
      :style="{ 'background-color': backgroundColorClass }"
      :class="{ 'right-[345px]': showCartShop }"
      class="h-14 fixed top-0 right-0 w-full rotate-90 translate-x-[48.25%] translate-y-[21rem] flex items-center justify-center gap-10 z-50"
    >
      <button @click="toggleCartShop">
        <div v-if="showCartShop">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 320 512"
            width="24"
            height="24"
            fill="none"
            transform="rotate(-90)"
          >
            <!--! Font Awesome Pro 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
            <path
              fill="#fff"
              d="M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"
            />
          </svg>
        </div>
        <div v-else class="relative">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 576 512"
            width="24"
            height="24"
            fill="none"
            transform="rotate(-90)"
          >
            <!--! Font Awesome Pro 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
            <path
              fill="#fff"
              d="M24 0C10.7 0 0 10.7 0 24S10.7 48 24 48H76.1l60.3 316.5c2.2 11.3 12.1 19.5 23.6 19.5H488c13.3 0 24-10.7 24-24s-10.7-24-24-24H179.9l-9.1-48h317c14.3 0 26.9-9.5 30.8-23.3l54-192C578.3 52.3 563 32 541.8 32H122l-2.4-12.5C117.4 8.2 107.5 0 96 0H24zM176 512c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm336-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48z"
            />
          </svg>
          <span
            class="-rotate-90 absolute rounded-full text-white w-5 -top-2 right-4 bg-shading-color text-xs"
            v-if="cart.length > 0"
            >{{ totalQuantity }}</span
          >
        </div>
      </button>

      <nav class="h-full flex items-center mt-3">
        <router-link
          to="/home"
          class="text-white text-sm h-11 w-40 text-center leading-[44px]"
          active-class="active"
          >HOME</router-link
        >

        <router-link
          to="/products"
          class="text-white text-sm h-11 w-40 text-center leading-[44px]"
          active-class="active"
          >SHOP</router-link
        >

        <router-link
          to="/recipes"
          class="text-white text-sm h-11 w-40 text-center leading-[44px]"
          active-class="activeRecipes"
          >RECIPES</router-link
        >
      </nav>

      <button>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 448 512"
          width="24"
          height="24"
          fill="none"
          transform="rotate(-90)"
        >
          <!--! Font Awesome Pro 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
          <path
            fill="#fff"
            d="M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0S96 57.3 96 128s57.3 128 128 128zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"
          />
        </svg>
      </button>
    </div>

    <div
      class="fixed top-0 -right-[350px] w-[350px] h-full z-50"
      :style="[
        { right: showCartShop ? '0px' : '-350px' },
        { 'background-color': backgroundColorClass },
      ]"
    >
      <div class="mx-4 my-6 h-full">
        <div class="relative bg-white max-h-[90%] rounded-t-xl">
          <div class="px-4 py-6 h-full">
            <div v-if="productsCart.length <= 0">
              <div
                class="uppercase border-y border-dashed py-5 text-center text-sm"
              >
                You havenâ€™t added anything, yet.
              </div>

              <div
                class="flex flex-col justify-center items-center gap-10 my-24 w-full"
              >
                <svg
                  width="84"
                  height="58"
                  viewBox="0 0 84 58"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <g clip-path="url(#clip0_1705_1505)">
                    <path
                      d="M45.3435 57.8437C40.564 58.3204 35.7361 57.8621 31.1363 56.495C30.2922 56.2776 29.4124 56.2303 28.5494 56.3561C22.9041 56.8652 17.2158 56.6512 11.6262 55.7194C10.5673 55.5329 9.52407 55.2678 8.50555 54.9264C6.70901 54.4275 5.07288 53.4807 3.75475 52.1769C2.43661 50.8731 1.48088 49.2564 0.979569 47.4825C-0.123225 43.9226 -0.434119 40.3106 0.768395 36.7276C1.97091 33.1445 3.73069 29.8741 6.63432 27.4314C10.7111 24.0162 13.7907 19.6922 16.7941 15.2757C17.8148 13.788 18.8882 12.3409 19.8678 10.8186C23.2466 5.5627 28.2033 2.66848 33.8229 0.862491C35.6078 0.363334 37.4475 0.0795656 39.3016 0.0173858C41.1494 -0.10996 43.0089 0.0752686 44.8625 0.0521149C47.9186 0.038845 50.9253 0.813003 53.5852 2.29803C56.6675 3.86145 59.6006 5.6961 62.3489 7.77966C64.0943 9.12976 65.5584 10.8006 66.6603 12.6998C67.3583 13.9154 68.0388 15.1541 68.7544 16.3639C70.0508 18.7266 71.8046 20.8152 73.9164 22.5112C75.0008 23.3904 75.9844 24.3843 76.8494 25.4749C78.5212 27.4603 80.1226 29.5268 81.7181 31.5585C83.2933 33.4514 84.0964 35.8559 83.9706 38.302C83.8567 39.9155 83.6274 41.519 83.2843 43.1006C83.0833 44.1837 82.6242 45.2041 81.945 46.0777C81.2657 46.9513 80.3858 47.653 79.3776 48.125C77.5299 49.0395 75.7701 50.1336 73.6173 50.1567C73.0444 50.2288 72.4952 50.4266 72.01 50.7355C64.6072 54.5675 56.9287 57.3864 48.5463 57.5833C47.4846 57.6527 46.4111 57.7685 45.3435 57.8437ZM21.5807 21.1451C21.4223 22.025 21.3461 22.3028 21.3167 22.6212C20.9237 26.6731 20.4779 30.696 20.1435 34.7421C20.0056 36.5654 20.0174 38.3966 20.1787 40.218C20.4486 43.2743 22.0558 45.6591 23.8156 48.0439C25.8921 50.8571 28.5435 52.3853 31.7639 53.323C35.6331 54.3761 39.659 54.7542 43.66 54.4401C47.1796 54.2491 50.6991 54.0523 54.1014 53.0509C57.1047 52.1653 60.067 51.1407 63.0645 50.232C65.7335 49.4216 68.0095 47.8471 70.3265 46.3421C70.6265 46.1518 70.8786 45.8965 71.0636 45.5956C71.2486 45.2947 71.3616 44.9561 71.3941 44.6056C71.5034 43.9029 71.531 43.1902 71.4762 42.4813C70.9776 37.8505 69.6871 33.5729 66.455 30.0998C65.0355 28.5717 63.8447 26.8178 62.5542 25.1623C62.1435 24.624 61.7505 24.0683 61.381 23.5531C60.5363 23.6284 59.8617 23.7094 59.1812 23.7441C57.1276 23.8212 55.0749 23.567 53.1042 22.9916C52.1831 22.764 51.3211 22.3473 50.5741 21.7688C49.8272 21.1904 49.2122 20.4631 48.7692 19.6344C48.1357 18.4767 47.5002 17.3325 46.8628 16.2018C46.2713 15.1887 45.9164 14.0582 45.824 12.8925C45.7317 11.7269 45.9042 10.5556 46.329 9.46409C46.81 8.13854 47.3966 6.85352 47.9715 5.57428C48.253 4.94334 48.6226 4.3587 48.9569 3.73934C48.3136 3.08486 47.44 2.69941 46.5167 2.66269C43.924 2.408 41.2081 2.54693 39.6536 3.08525C40.1463 4.06928 40.6684 5.03016 41.1025 6.03156C41.7919 7.41037 41.9982 8.97592 41.6891 10.4829C41.1521 12.9424 40.2779 15.3183 39.0905 17.5447C37.3014 20.6531 34.603 22.5807 31.4648 23.912C30.1015 24.4746 28.5946 24.6041 27.1533 24.2825C24.9859 23.899 23.0182 22.7912 21.5807 21.1451ZM26.7368 9.53356C25.8293 10.5259 25.0255 11.6061 24.3377 12.7577C24.1753 13.0165 24.0918 13.3159 24.0972 13.6202C24.15 15.8429 24.0326 18.0715 24.8832 20.2132C25.6575 22.1581 27.4701 22.9916 29.4176 22.025C32.4268 20.5258 34.8435 18.4419 36.1692 15.1715C36.6972 13.8633 37.1664 12.5262 37.7061 11.2238C38.0436 10.3732 38.2011 9.46349 38.1688 8.55061C38.1365 7.63774 37.9152 6.74105 37.5184 5.91579C36.5564 3.62936 35.9522 3.39203 33.7231 4.54393C33.4061 4.73797 33.1112 4.96503 32.8433 5.22118C33.2069 6.17048 33.7231 6.89404 33.7173 7.61759C33.7414 10.5644 32.8532 13.4482 31.1715 15.8835C30.8856 16.2908 30.5396 16.6537 30.1449 16.9601C29.776 17.251 29.3318 17.4342 28.8628 17.4888C28.3938 17.5434 27.9186 17.4673 27.4912 17.269C27.0638 17.0708 26.7011 16.7584 26.4444 16.3672C26.1877 15.976 26.0472 15.5217 26.0388 15.0557C26.0319 14.3492 26.1067 13.6443 26.2617 12.9545C26.521 11.8301 26.68 10.6854 26.7368 9.53356ZM51.2447 4.76389C50.1816 6.58961 49.4921 8.60345 49.215 10.6912C48.9844 12.205 49.2669 13.7515 50.0187 15.0904C51.0042 16.7112 52.107 18.2625 53.1804 19.8312C53.6883 20.5715 54.4693 21.0866 55.3567 21.2667C57.127 21.6912 58.9789 21.6533 60.7299 21.1567C60.812 18.2278 60.812 18.2278 60.1433 16.4681C59.9589 16.5208 59.7845 16.6029 59.6271 16.7112C59.1962 17.1878 58.6213 17.5148 57.9875 17.6441C57.3537 17.7734 56.6945 17.6979 56.1075 17.429C55.4963 17.1977 54.9483 16.8286 54.5073 16.3513C54.0663 15.8739 53.7445 15.3014 53.5676 14.6795C52.8603 12.8658 52.7901 10.8703 53.3681 9.01259C53.6262 8.25431 53.9078 7.5076 54.2011 6.69722C53.9208 6.41811 53.6209 6.15891 53.3036 5.92158C52.7346 5.55691 52.148 5.25012 51.2447 4.76389Z"
                      fill="#432F29"
                    ></path>
                    <path
                      d="M40.4163 40.1543C42.4166 40.3511 44.1529 40.5479 45.8892 40.6811C47.6255 40.8142 49.4087 40.9126 51.1392 40.9415C53.0209 41.0518 54.8841 40.5227 56.4185 39.4423C57.9378 38.3368 58.1783 36.3282 56.7235 35.101C55.9927 34.4561 55.1024 34.0128 54.1425 33.816C52.225 33.4746 50.2774 33.3253 48.3294 33.3703C45.7132 33.4745 43.097 33.8507 40.4925 34.1807C37.8881 34.5106 35.4654 34.5859 33.1015 33.214C32.3231 32.8136 31.4624 32.5939 30.585 32.5715C28.9132 32.4673 28.1096 33.6366 28.5202 35.3383C28.6534 35.921 28.9366 36.4599 29.3425 36.903C29.7483 37.3461 30.2632 37.6785 30.8372 37.8679C32.1923 38.3599 32.5677 39.3497 32.4621 40.6984C32.4074 41.3046 32.3878 41.9134 32.4034 42.5218C32.3944 43.2274 32.4633 43.932 32.6087 44.623C33.0252 46.2032 34.5856 47.5172 35.9699 47.5866C37.3543 47.6561 38.4277 46.73 39.0319 44.8545C39.4895 43.3322 39.9177 41.7809 40.4163 40.1543ZM45.2733 23.9467C45.2733 22.9453 45.1266 21.996 44.2291 21.3419C44.1094 21.2606 43.9731 21.2063 43.8298 21.1828C43.6865 21.1592 43.5397 21.1671 43.3998 21.2057C43.2598 21.2444 43.1302 21.3129 43.0202 21.4065C42.9101 21.5 42.8221 21.6163 42.7626 21.7471C42.6198 22.3711 42.6471 23.0212 42.8419 23.6313C43.0366 24.2414 43.3919 24.7897 43.8713 25.2202C43.9953 25.2979 44.1374 25.343 44.2841 25.3513C44.4308 25.3596 44.5771 25.3308 44.7093 25.2676C44.8416 25.2044 44.9552 25.1089 45.0395 24.9902C45.1239 24.8714 45.176 24.7334 45.1911 24.5892C45.2087 24.404 45.2322 24.2072 45.2615 23.9699L45.2733 23.9467Z"
                      fill="white"
                    ></path>
                    <path
                      d="M40.4163 40.1543C39.9294 41.7808 39.5012 43.3321 39.0143 44.8545C38.4277 46.7299 37.3426 47.6503 35.9523 47.5866C34.5621 47.5229 33.0194 46.2032 32.5912 44.6229C32.4457 43.932 32.3769 43.2274 32.3858 42.5217C32.3702 41.9133 32.3898 41.3046 32.4445 40.6984C32.5501 39.3497 32.1747 38.383 30.8197 37.8678C30.2456 37.6784 29.7308 37.3461 29.3249 36.903C28.919 36.4599 28.6358 35.921 28.5026 35.3383C28.092 33.6365 28.8956 32.4441 30.5674 32.5714C31.4449 32.5938 32.3056 32.8136 33.0839 33.214C35.4303 34.5858 37.9233 34.5048 40.475 34.1806C43.0266 33.8565 45.6956 33.4744 48.3118 33.3702C50.2598 33.3252 52.2074 33.4745 54.1249 33.816C55.0849 34.0128 55.9751 34.4561 56.706 35.101C58.1372 36.3281 57.9202 38.3367 56.4009 39.4423C54.8665 40.5227 53.0033 41.0518 51.1216 40.9415C49.3618 40.9415 47.602 40.8084 45.8716 40.681C44.1411 40.5537 42.4048 40.3511 40.4163 40.1543ZM37.3719 37.5148C39.2548 37.0054 39.6009 37.0285 40.9618 37.6421C41.7655 38.001 42.5456 38.5682 43.3786 38.6609C45.9948 38.9445 48.6579 39.0661 51.2565 39.2397C52.2549 39.2484 53.2178 38.8749 53.9431 38.1978C54.1209 38.055 54.2642 37.875 54.3626 37.6707C54.4611 37.4665 54.5122 37.2431 54.5122 37.0169C54.5122 36.7908 54.4611 36.5674 54.3626 36.3632C54.2642 36.1589 54.1209 35.9789 53.9431 35.8361C53.2462 35.288 52.3693 35.0119 51.4794 35.0605C48.1547 34.9755 44.8305 35.2492 41.566 35.8766C38.4742 36.4387 35.2833 36.0967 32.3858 34.8926C32.0632 34.7595 31.7171 34.389 31.3417 34.8926C31.2587 35.0732 31.2147 35.2688 31.2125 35.4671C31.2103 35.6654 31.2499 35.8619 31.3288 36.0443C31.4076 36.2266 31.5241 36.3908 31.6707 36.5264C31.8174 36.6619 31.991 36.7659 32.1805 36.8317C32.6263 37.0227 33.1015 37.1559 33.5414 37.37C34.0928 37.622 34.5529 38.0343 34.86 38.5516C35.1672 39.0689 35.3068 39.6665 35.2601 40.2643C35.2601 40.9762 35.1722 41.6824 35.1546 42.3944C35.0461 43.2435 35.2189 44.1045 35.6473 44.8487C36.9965 42.4349 37.1666 40.0443 37.3602 37.5148H37.3719Z"
                      fill="#432F29"
                    ></path>
                    <path
                      d="M45.2614 23.9698C45.2321 24.2072 45.2086 24.404 45.1793 24.6008C45.1642 24.745 45.112 24.883 45.0277 25.0017C44.9434 25.1204 44.8297 25.2159 44.6975 25.2791C44.5653 25.3423 44.4189 25.3711 44.2722 25.3628C44.1255 25.3545 43.9835 25.3094 43.8594 25.2317C43.38 24.8012 43.0248 24.253 42.83 23.6429C42.6353 23.0328 42.6079 22.3826 42.7508 21.7587C42.8103 21.6279 42.8982 21.5116 43.0083 21.418C43.1184 21.3245 43.248 21.2559 43.3879 21.2173C43.5278 21.1786 43.6746 21.1708 43.8179 21.1943C43.9612 21.2178 44.0976 21.2722 44.2173 21.3535C45.1089 22.0191 45.279 22.9684 45.2614 23.9698Z"
                      fill="#432F29"
                    ></path>
                  </g>
                  <defs>
                    <clipPath id="clip0_1705_1505">
                      <rect width="84" height="58" fill="white"></rect>
                    </clipPath>
                  </defs>
                </svg>
                <base-button
                  title="Shop yummy products"
                  class="text-white w-full h-12 rounded-lg font-semibold text-sm text-center leading-[3rem]"
                  :style="{ 'background-color': backgroundColorClass }"
                  to="/products"
                ></base-button>
              </div>
            </div>

            <div v-else>
              <div
                class="uppercase border-y border-dashed py-5 text-center text-sm"
              >
                YOUR DELICIOUS BILL
              </div>
              <div>
                <div
                  class="max-h-[305px]"
                  :class="{ 'overscroll-y-auto': productsCart.length > 3 }"
                >
                  <div
                    class="flex my-5"
                    v-for="(product, index) in productsCart"
                    :key="index"
                  >
                    <div class="w-1/3">
                      <img :src="product['mini-img']" />
                    </div>
                    <div class="w-2/3 flex flex-col justify-around ml-5">
                      <div class="text-xs uppercase font-semibold">
                        {{ product.name }}
                      </div>
                      <div class="flex justify-between">
                        <div class="flex justify-center items-center">
                          <span
                            class="leading-5 cursor-pointer"
                            @click="cart[index].quantity--"
                            >-</span
                          >
                          <span class="text-sm"
                            >&nbsp;{{ product.quantity }}&nbsp;</span
                          >
                          <span
                            class="leading-5 cursor-pointer"
                            @click="cart[index].quantity++"
                            >+</span
                          >
                        </div>
                        <div class="text-sm">
                          ${{ product.price * product.quantity }}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="border-t border-dashed py-1">
                  <div class="border-t border-dashed py-5 flex flex-col gap-5">
                    <div class="text-sm flex justify-between">
                      <span>Shipping:</span>
                      <span>Shipping is calculated at checkout.</span>
                    </div>
                    <div class="text-sm flex justify-between font-">
                      <span>Subtotal:</span>
                      <span>${{ subTotal }}</span>
                    </div>
                    <div>
                      <base-button
                        title="Check out"
                        class="text-white w-full h-12 rounded-lg font-semibold text-sm"
                        :style="{ 'background-color': backgroundColorClass }"
                      ></base-button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="absolute -bottom-5">
            <svg
              width="318"
              height="30"
              viewBox="0 0 415 30"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g clip-path="url(#clip0_3273_1095)">
                <path
                  d="M0 -677.772L0 30H17.7264C17.8192 27.5891 18.8422 25.3078 20.5808 23.6348C22.3195 21.9619 24.6385 21.0273 27.0514 21.0273C29.4643 21.0273 31.7834 21.9619 33.5221 23.6348C35.2607 25.3078 36.2837 27.5891 36.3764 30H45.3913C45.484 27.5891 46.507 25.3078 48.2456 23.6348C49.9843 21.9619 52.3034 21.0273 54.7163 21.0273C57.1292 21.0273 59.4482 21.9619 61.1869 23.6348C62.9255 25.3078 63.9485 27.5891 64.0413 30H73.0699C73.0699 28.7764 73.3109 27.5648 73.7792 26.4344C74.2475 25.3039 74.9338 24.2768 75.7991 23.4116C76.6644 22.5464 77.6916 21.8601 78.8221 21.3918C79.9526 20.9236 81.1643 20.6825 82.388 20.6825C83.6116 20.6825 84.8233 20.9236 85.9539 21.3918C87.0844 21.8601 88.1116 22.5464 88.9769 23.4116C89.8421 24.2768 90.5285 25.3039 90.9968 26.4344C91.4651 27.5648 91.7061 28.7764 91.7061 30H100.735C100.735 28.7764 100.976 27.5648 101.444 26.4344C101.912 25.3039 102.599 24.2768 103.464 23.4116C104.329 22.5464 105.356 21.8601 106.487 21.3918C107.617 20.9236 108.829 20.6825 110.053 20.6825C111.276 20.6825 112.488 20.9236 113.619 21.3918C114.749 21.8601 115.776 22.5464 116.642 23.4116C117.507 24.2768 118.193 25.3039 118.662 26.4344C119.13 27.5648 119.371 28.7764 119.371 30H128.413C128.506 27.5891 129.529 25.3078 131.268 23.6348C133.006 21.9619 135.325 21.0273 137.738 21.0273C140.151 21.0273 142.47 21.9619 144.209 23.6348C145.948 25.3078 146.971 27.5891 147.063 30H156.092C156.092 27.5289 157.074 25.1589 158.821 23.4116C160.569 21.6642 162.939 20.6825 165.41 20.6825C167.881 20.6825 170.251 21.6642 171.999 23.4116C173.746 25.1589 174.728 27.5289 174.728 30H183.757C183.757 27.5289 184.738 25.1589 186.486 23.4116C188.233 21.6642 190.604 20.6825 193.075 20.6825C195.546 20.6825 197.916 21.6642 199.664 23.4116C201.411 25.1589 202.393 27.5289 202.393 30H211.422C211.422 27.5289 212.403 25.1589 214.151 23.4116C215.898 21.6642 218.268 20.6825 220.74 20.6825C223.211 20.6825 225.581 21.6642 227.329 23.4116C229.076 25.1589 230.058 27.5289 230.058 30H239.086C239.179 27.5891 240.202 25.3078 241.941 23.6348C243.679 21.9619 245.998 21.0273 248.411 21.0273C250.824 21.0273 253.143 21.9619 254.882 23.6348C256.621 25.3078 257.644 27.5891 257.736 30H266.765C266.765 27.5289 267.747 25.1589 269.494 23.4116C271.242 21.6642 273.612 20.6825 276.083 20.6825C278.554 20.6825 280.925 21.6642 282.672 23.4116C284.419 25.1589 285.401 27.5289 285.401 30H294.43C294.43 27.5289 295.412 25.1589 297.159 23.4116C298.907 21.6642 301.277 20.6825 303.748 20.6825C306.219 20.6825 308.589 21.6642 310.337 23.4116C312.084 25.1589 313.066 27.5289 313.066 30H322.095C322.187 27.5891 323.21 25.3078 324.949 23.6348C326.688 21.9619 329.007 21.0273 331.42 21.0273C333.833 21.0273 336.152 21.9619 337.89 23.6348C339.629 25.3078 340.652 27.5891 340.745 30H349.773C349.773 27.5289 350.755 25.1589 352.502 23.4116C354.25 21.6642 356.62 20.6825 359.091 20.6825C361.563 20.6825 363.933 21.6642 365.68 23.4116C367.428 25.1589 368.409 27.5289 368.409 30H377.438C377.438 27.5289 378.42 25.1589 380.167 23.4116C381.915 21.6642 384.285 20.6825 386.756 20.6825C389.228 20.6825 391.598 21.6642 393.345 23.4116C395.093 25.1589 396.074 27.5289 396.074 30H415.014L415.014 -677.772H0Z"
                  fill="white"
                ></path>
              </g>
            </svg>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import BaseButton from "../bases/BaseButton.vue";
export default {
  components: { BaseButton },
  props: {
    subColor: {
      type: Boolean,
      default: false,
    },
  },

  data() {
    return {
      showCartShop: false,
    };
  },
  methods: {
    toggleCartShop() {
      this.showCartShop = !this.showCartShop;
    },
  },
  computed: {
    backgroundColorClass() {
      if (this.subColor) {
        return "#507B54";
      }
      return "#DE4917";
    },
    showCartShopClass() {
      if (this.showCartShop)
        return [
          "bg-[rgba(0,0,0,0.5)]",
          "absolute",
          "top-0",
          "bottom-0",
          "left-0",
          "right-[399px]",
          "z-10",
        ];
      return "";
    },
    cart() {
      return this.$store.getters["cart/cart"];
    },
    totalQuantity() {
      return this.cart.reduce((total, cur) => total + cur.quantity, 0);
    },
    subTotal() {
      return this.productsCart.reduce(
        (total, cur) => total + cur.quantity * cur.price,
        0
      );
    },
    productsCart() {
      let productsCart = [];
      this.cart.forEach((element) => {
        productsCart.push({
          ...this.$store.getters["products/getProductByID"](element.productID),
          quantity: element.quantity,
        });
      });
      return productsCart;
    },
  },
  watch: {
    cart: {
      handler(newVal) {
        const key = newVal.find((val) => val.quantity === 0);
        if (key) {
          this.$store.dispatch("cart/removeCart", { productID: key.productID });
        }
      },
      deep: true,
    },
  },
};
</script>

<style scoped>
.active {
  @apply bg-background-color text-primary-color rounded-t-lg;
}
.activeRecipes {
  @apply bg-background-color text-sub-color rounded-t-lg;
}
</style>
